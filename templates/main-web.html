<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="../static/css/g.ttf">
    <link rel="preconnect" href="../static/css/gilroy-medium.ttf">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue check</title>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
    <div class="head_main">
        <img class="img_head_l" src="../static/image/sirius.svg">
        <p class="p_head">Очереди</p>
        <button class="audioPlayer" onclick="playAudio()"></button>
        <audio id='player' style="display:none;">
            <source id='mp3' type="audio/mpeg">
        </audio>
        <button class="button_theme"></button>
    </div>
    <div class="div_head_2">
        <p class="p_count_hum">Количество людей:</p>
        <p class="p_count_hum_num">26</p>
        <p class="p_load">Общая нагрузка:</p>
        <p class="p_load_num">36%</p>
    </div>
    <div class="main">
        <img class=schema_img src="../static/image/schema_default.svg">
        <div id="triggerArea" style="position: absolute; top: 15%; left: 270%; width: 70%; height: 7%; cursor: pointer;"></div>
        <button class="btn_cam_1"></button>
        <button class="btn_cam_2"></button>
    </div>


    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p class="video_text">Видеопоток с камеры</p>
            <img id="videoPlayer" src="http://127.0.0.1:8000/video" width="100%" >
        </div>
    </div>

    <div id="themeSelector" class="theme-overlay">
        <div class="theme-content">
            <div class="theme-header">
                <span class="theme-close">&times;</span>
                <h2 class="theme-title">Темы</h2>
            </div>
            <ul class="theme-selector-list">
                <li class="theme-selector-list-item">Светлая</li>
                <li class="theme-selector-list-item">Темная</li>
                <li class="theme-selector-list-item">Черно-белая</li>
                <li class="theme-selector-list-item">Бело-черная</li>
                <li class="theme-selector-list-item">Синяя</li>
            </ul>
        </div>
        </div>

    <div id="infoPopup" class="popup">
        <div class="popup-content">
            <span class="close-button">&times;</span>
            <h2 id="many_people">Количество людей в очереди:</h2>
            <p id="queueCount">Загрузка...</p>
            <h2 id="many_min">Сколько времени займет ожидание:</h2>
            <p id="waitTime">Загрузка...</p>
        </div>
    </div>
    <div>
    <!-- Всплывающее окно для информации о количестве людей и времени ожидания -->
</div>
    <script src="{{url_for('static', filename='js/update_head.js')}}"></script>
    <script src="{{url_for('static', filename='js/script.js')}}"></script>
        <script>
        function playAudio() {
            var mp = document.getElementById("mp3");
            var timestamp = new Date().getTime();  // Получение текущего времени в миллисекундах
            mp.src = 'http://127.0.0.1:8000/get_audio?t=' + timestamp;  // Добавление метки времени к URL

            var audio = document.getElementById("player");
            audio.load();  // Нужно загрузить новый источник файла в элемент <audio>
            audio.style.display = "block";
            audio.play();
        }
    </script>

</body>
</html>